<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>table</title>
		<style>
			table {
				border: 1px solid #000;
				border-collapse: collapse;
			}
			
			tr {
				border: 1px solid #000;
			}
			
			table tr.selected {
				background-color: #fc0;
			}
			
			td {
				border: 1px solid #000;
				padding: 5px;
			}
		</style>
		<script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
		<script type="text/javascript">
			$(function() {
				//获取所有checkbox
				var $checkbox = $('.datalist :checkbox');
				//获取所有tr
				var $trs = $('.datalist tr');
				$('#all').on('click', function() {
					var checkAll = $("#all").prop('checked');
					$checkbox.prop('checked', checkAll); //这里的checkAll得到布尔值,简化代码
					if(checkAll) {
						$trs.addClass('selected');
					} else {
						$trs.removeClass('selected');
					}
				});
				//反选
				$('#fx').on('click', function() {
					//循环取反
					$checkbox.each(function(idx, ele) {
						ele.checked = !ele.checked;
						$(this).closest('tr').toggleClass('selected');
					});

					var $checked = $checkbox.filter(':checked');
					//利用length判断是否全部选择
					$('#all').prop('checked', $checked.length === $checkbox.length);
				});
				//jquery事件委托
				$('.datalist').on('click',':checkbox',function(){
					var $checked = $checkbox.filter(':checked');
					$('#all').prop('checked',$checked.length===$checkbox.length);
					//获取当前行并且高亮
					$currentTr =$(this).closest('tr');
					if(this.checked){
						$currentTr.addClass('selected')
					}else{
						$currentTr.removeClass('selected')
					}
				}).on('click','button',function(){
					$(this).closest('tr').remove()
				})
			})
		</script>
	</head>

	<body>
		<div>
			<input type="checkbox" id="all">全选
			<input type="checkbox" id="fx">反选
		</div>
		<table class="datalist">
			<tr>
				<td><input type="checkbox" /></td>
				<td>单元格01</td>
				<td>单元格02</td>
				<td>单元格03</td>
				<td>单元格04</td>
				<td>单元格05</td>
				<td><button>删除</button></td>
			</tr>
			<tr>
				<td><input type="checkbox" /></td>
				<td>单元格01</td>
				<td>单元格02</td>
				<td>单元格03</td>
				<td>单元格04</td>
				<td>单元格05</td>
				<td><button>删除</button></td>
			</tr>
			<tr>
				<td><input type="checkbox" /></td>
				<td>单元格01</td>
				<td>单元格02</td>
				<td>单元格03</td>
				<td>单元格04</td>
				<td>单元格05</td>
				<td><button>删除</button></td>
			</tr>
			<tr>
				<td><input type="checkbox" /></td>
				<td>单元格01</td>
				<td>单元格02</td>
				<td>单元格03</td>
				<td>单元格04</td>
				<td>单元格05</td>
				<td><button>删除</button></td>
			</tr>
			<tr>
				<td><input type="checkbox" /></td>
				<td>单元格01</td>
				<td>单元格02</td>
				<td>单元格03</td>
				<td>单元格04</td>
				<td>单元格05</td>
				<td><button>删除</button></td>
			</tr>
			<tr>
				<td><input type="checkbox" /></td>
				<td>单元格01</td>
				<td>单元格02</td>
				<td>单元格03</td>
				<td>单元格04</td>
				<td>单元格05</td>
				<td><button>删除</button></td>
			</tr>
			<tr>
				<td><input type="checkbox" /></td>
				<td>单元格01</td>
				<td>单元格02</td>
				<td>单元格03</td>
				<td>单元格04</td>
				<td>单元格05</td>
				<td><button>删除</button></td>
			</tr>
			<tr>
				<td><input type="checkbox" /></td>
				<td>单元格01</td>
				<td>单元格02</td>
				<td>单元格03</td>
				<td>单元格04</td>
				<td>单元格05</td>
				<td><button>删除</button></td>
			</tr>
			<tr>
				<td><input type="checkbox" /></td>
				<td>单元格01</td>
				<td>单元格02</td>
				<td>单元格03</td>
				<td>单元格04</td>
				<td>单元格05</td>
				<td><button>删除</button></td>
			</tr>
			<tr>
				<td><input type="checkbox" /></td>
				<td>单元格01</td>
				<td>单元格02</td>
				<td>单元格03</td>
				<td>单元格04</td>
				<td>单元格05</td>
				<td><button>删除</button></td>
			</tr>
			</div>
	</body>

</html>